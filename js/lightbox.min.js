"use strict";function Lightbox(){function t(){return window.innerHeight||document.documentElement.offsetHeight}function e(){return window.innerWidth||document.documentElement.offsetWidth}function n(t,e,n,o){t.addEventListener?t.addEventListener(e,n,o||!1):t.attachEvent&&t.attachEvent("on"+e,n)}function o(t,e){if(t&&e)return new RegExp("(^|\\s)"+e+"(\\s|$)").test(t.className)}function i(t,e){if(t&&e)return t.className=t.className.replace(new RegExp("(?:^|\\s)"+e+"(?!\\S)"),""),t}function r(t,e){if(t&&e)return o(t,e)||(t.className+=" "+e),t}function a(t){return"undefined"!=typeof t}function p(t,e){if(!t||!a(t))return!1;var n;return t.getAttribute?n=t.getAttribute(e):t.getAttributeNode&&(n=t.getAttributeNode(e).value),!(!a(n)||""===n)&&n}function c(t,e){if(!t||!a(t))return!1;var n;return t.getAttribute?n=t.getAttribute(e):t.getAttributeNode&&(n=t.getAttributeNode(e).value),"string"==typeof n}function l(t){n(t,"click",function(e){s(e),u(e),D=p(t,W+"-group")||!1,P=t,A(t,!1,!1,!1)},!1)}function s(t){t.stopPropagation?t.stopPropagation():t.returnValue=!1}function u(t){t.preventDefault?t.preventDefault():t.returnValue=!1}function m(t){for(var e=[],n=0;n<L.thumbnails.length;n++)p(L.thumbnails[n],W+"-group")===t&&e.push(L.thumbnails[n]);return e}function d(t,e){for(var n=m(e),o=0;o<n.length;o++)if(p(t,"src")===p(n[o],"src")&&p(t,W+"-index")===p(n[o],W+"-index")&&p(t,W)===p(n[o],W))return o}function g(){if(D){var t=new Image,e=new Image,n=d(P,D);n===j.length-1?(t.src=p(j[j.length-1],W)||j[j.length-1].src,e.src=p(j[0].src,W)||j[0].src):0===n?(t.src=p(j[j.length-1],W)||j[j.length-1].src,e.src=p(j[1],W)||j[1].src):(t.src=p(j[n-1],W)||j[n-1].src,e.src=p(j[n+1],W)||j[n+1].src)}}function f(){if(!M){h();var t=function(){if(r(L.box,T+"-loading"),!N&&"number"==typeof L.opt.loadingAnimation){var t=0;w=setInterval(function(){r(X[t],T+"-active"),setTimeout(function(){i(X[t],T+"-active")},L.opt.loadingAnimation),t=t>=X.length?0:t+=1},L.opt.loadingAnimation)}};I=setTimeout(t,500)}}function h(){if(!M&&(i(L.box,T+"-loading"),!N&&"string"!=typeof L.opt.loadingAnimation&&L.opt.loadingAnimation)){clearInterval(w);for(var t=0;t<X.length;t++)i(X[t],T+"-active")}}function v(){if(!$){if($=document.createElement("span"),r($,T+"-next"),L.opt.nextImg){var t=document.createElement("img");t.setAttribute("src",L.opt.nextImg),$.appendChild(t)}else r($,T+"-no-img");n($,"click",function(t){s(t),L.next()},!1),L.box.appendChild($)}if(r($,T+"-active"),!_){if(_=document.createElement("span"),r(_,T+"-prev"),L.opt.prevImg){var e=document.createElement("img");e.setAttribute("src",L.opt.prevImg),_.appendChild(e)}else r(_,T+"-no-img");n(_,"click",function(t){s(t),L.prev()},!1),L.box.appendChild(_)}r(_,T+"-active")}function b(){if(L.opt.responsive&&$&&_){var e=t()/2-$.offsetHeight/2;$.style.top=e+"px",_.style.top=e+"px"}}function x(t){function e(t){return"boolean"!=typeof t||t}if(t||(t={}),L.opt={boxId:t.boxId||!1,controls:e(t.controls),dimensions:e(t.dimensions),captions:e(t.captions),prevImg:"string"==typeof t.prevImg&&t.prevImg,nextImg:"string"==typeof t.nextImg&&t.nextImg,hideCloseBtn:t.hideCloseBtn||!1,closeOnClick:"boolean"!=typeof t.closeOnClick||t.closeOnClick,nextOnClick:e(t.nextOnClick),loadingAnimation:void 0===t.loadingAnimation||t.loadingAnimation,animElCount:t.animElCount||4,preload:e(t.preload),carousel:e(t.carousel),animation:"number"==typeof t.animation||t.animation===!1?t.animation:400,responsive:e(t.responsive),maxImgSize:t.maxImgSize||.8,keyControls:e(t.keyControls),hideOverflow:t.hideOverflow||!0,onopen:t.onopen||!1,onclose:t.onclose||!1,onload:t.onload||!1,onresize:t.onresize||!1,onloaderror:t.onloaderror||!1,onimageclick:"function"==typeof t.onimageclick&&t.onimageclick},L.opt.boxId){L.box=document.getElementById(L.opt.boxId);var o=L.box.getAttribute("class");o.search(T+" ")<0&&L.box.setAttribute("class",o+" "+T)}else if(!L.box){var a=document.getElementById(z);a||(a=document.createElement("div")),a.setAttribute("id",z),a.setAttribute("class",T),L.box=a,S.appendChild(L.box)}if(L.box.innerHTML=B,M&&r(L.box,T+"-ie8"),L.wrapper=document.getElementById(z+"-contentwrapper"),!L.opt.hideCloseBtn){var p=document.createElement("span");p.setAttribute("id",z+"-close"),p.setAttribute("class",T+"-close"),p.innerHTML="X",L.box.appendChild(p),n(p,"click",function(t){s(t),L.close()},!1)}if(!M&&L.opt.closeOnClick&&n(L.box,"click",function(t){s(t),L.close()},!1),"string"==typeof L.opt.loadingAnimation)y=document.createElement("img"),y.setAttribute("src",L.opt.loadingAnimation),r(y,T+"-loading-animation"),L.box.appendChild(y);else if(L.opt.loadingAnimation){L.opt.loadingAnimation="number"==typeof L.opt.loadingAnimation?L.opt.loadingAnimation:200,y=document.createElement("div"),r(y,T+"-loading-animation");for(var c=0;c<L.opt.animElCount;)X.push(y.appendChild(document.createElement("span"))),c++;L.box.appendChild(y)}L.opt.responsive?(n(window,"resize",function(){L.resize()},!1),r(L.box,T+"-nooverflow")):i(L.box,T+"-nooverflow"),L.opt.keyControls&&n(document,"keydown",function(t){q&&(s(t),39===t.keyCode?L.next():37===t.keyCode?L.prev():27===t.keyCode&&L.close())},!1)}function A(t,e,i,c){if(!t&&!e)return!1;D=e||D||p(t,W+"-group"),D&&(j=m(D),"boolean"!=typeof t||t||(t=j[0])),R.img=new Image,P=t;var l;l="string"==typeof t?t:p(t,W)?p(t,W):p(t,"src"),V=!1,q||("number"==typeof L.opt.animation&&r(R.img,T+"-animate-transition "+T+"-animate-init"),q=!0,L.opt.onopen&&L.opt.onopen(R)),L.opt&&a(L.opt.hideOverflow)&&!L.opt.hideOverflow||S.setAttribute("style","overflow: hidden"),L.box.setAttribute("style","padding-top: 0"),L.wrapper.innerHTML="",L.wrapper.appendChild(R.img),L.opt.animation&&r(L.wrapper,T+"-animate");var u=p(t,W+"-caption");if(u&&L.opt.captions){var d=document.createElement("p");d.setAttribute("class",T+"-caption"),d.innerHTML=u,L.wrapper.appendChild(d)}r(L.box,T+"-active"),M&&r(L.wrapper,T+"-active"),L.opt.controls&&j.length>1&&(v(),b()),R.img.onerror=function(t){L.opt.onloaderror&&(t._happenedWhile=!!c&&c,L.opt.onloaderror(t))},R.img.onload=function(){if(R.originalWidth=this.naturalWidth||this.width,R.originalHeight=this.naturalHeight||this.height,M||N){var t=new Image;t.setAttribute("src",l),R.originalWidth=t.width,R.originalHeight=t.height}var e=setInterval(function(){o(L.box,T+"-active")&&(r(L.wrapper,T+"-wrapper-active"),"number"==typeof L.opt.animation&&r(R.img,T+"-animate-transition"),i&&i(),h(),clearTimeout(I),L.opt.preload&&g(),L.opt.nextOnClick&&(r(R.img,T+"-next-on-click"),n(R.img,"click",function(t){s(t),L.next()},!1)),L.opt.onimageclick&&n(R.img,"click",function(t){s(t),L.opt.onimageclick(R)},!1),L.opt.onload&&L.opt.onload(c),clearInterval(e),L.resize())},10)},R.img.setAttribute("src",l),f()}var y,w,I,C,k,E,H,O="jslghtbx",T=O,z=O,W="data-"+O,L=this,M=!1,N=!1,S=document.getElementsByTagName("body")[0],B='<div class="'+O+'-contentwrapper" id="'+O+'-contentwrapper" ></div>',V=!1,D=!1,P=!1,R={},j=[],q=!1,X=[],$=!1,_=!1;L.opt={},L.box=!1,L.wrapper=!1,L.thumbnails=[],L.load=function(t){navigator.appVersion.indexOf("MSIE 8")>0&&(M=!0),navigator.appVersion.indexOf("MSIE 9")>0&&(N=!0),x(t);for(var e=document.querySelectorAll("["+W+"]"),n=0;n<e.length;n++)c(e[n],W)&&(e[n].setAttribute(W+"-index",n),L.thumbnails.push(e[n]),l(e[n]))},L.open=function(t,e){t&&e&&(e=!1),A(t,e,!1,!1)},L.resize=function(){if(R.img){C=e(),k=t();var n=L.box.offsetWidth,o=L.box.offsetHeight;!V&&R.img&&R.img.offsetWidth&&R.img.offsetHeight&&(V=R.img.offsetWidth/R.img.offsetHeight),Math.floor(n/V)>o?(E=o*V,H=o):(E=n,H=n/V),E=Math.floor(E*L.opt.maxImgSize),H=Math.floor(H*L.opt.maxImgSize),(L.opt.dimensions&&H>R.originalHeight||L.opt.dimensions&&E>R.originalWidth)&&(H=R.originalHeight,E=R.originalWidth),R.img.setAttribute("width",E),R.img.setAttribute("height",H),R.img.setAttribute("style","margin-top:"+(t()-H)/2+"px"),setTimeout(b,200),L.opt.onresize&&L.opt.onresize(R)}},L.next=function(){if(D){var t=d(P,D)+1;if(j[t])P=j[t];else{if(!L.opt.carousel)return;P=j[0]}"number"==typeof L.opt.animation?(i(R.img,T+"-animating-next"),setTimeout(function(){var t=function(){setTimeout(function(){r(R.img,T+"-animating-next")},L.opt.animation/2)};A(P,!1,t,"next")},L.opt.animation/2)):A(P,!1,!1,"next")}},L.prev=function(){if(D){var t=d(P,D)-1;if(j[t])P=j[t];else{if(!L.opt.carousel)return;P=j[j.length-1]}"number"==typeof L.opt.animation?(i(R.img,T+"-animating-prev"),setTimeout(function(){var t=function(){setTimeout(function(){r(R.img,T+"-animating-next")},L.opt.animation/2)};A(P,!1,t,"prev")},L.opt.animation/2)):A(P,!1,!1,"prev")}},L.close=function(){D=!1,P=!1;var t=R;R={},j=[],q=!1,i(L.box,T+"-active"),i(L.wrapper,T+"-wrapper-active"),i($,T+"-active"),i(_,T+"-active"),L.box.setAttribute("style","padding-top: 0px"),h(),M&&L.box.setAttribute("style","display: none"),L.opt&&a(L.opt.hideOverflow)&&!L.opt.hideOverflow||S.setAttribute("style","overflow: auto"),L.opt.onclose&&L.opt.onclose(t)}}"undefined"!=typeof exports&&(exports.Lightbox=Lightbox);