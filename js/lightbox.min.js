"use strict";function Lightbox(){var r,p,l,n,o,t="jslghtbx",c=t,s=t,m="data-"+t,u=this,d=!1,g=!1,f=document.getElementsByTagName("body")[0],h='<div class="'+t+'-contentwrapper" id="'+t+'-contentwrapper" ></div>',v=!1,b=!1,x=!1,y={},w=[],A=!1,I=[],C=!1,k=!1;function i(){return window.innerHeight||document.documentElement.offsetHeight}function E(t,e,n,o){t.addEventListener?t.addEventListener(e,n,o||!1):t.attachEvent&&t.attachEvent("on"+e,n)}function H(t,e){if(t&&e)return new RegExp("(^|\\s)"+e+"(\\s|$)").test(t.className)}function O(t,e){if(t&&e)return t.className=t.className.replace(new RegExp("(?:^|\\s)"+e+"(?!\\S)"),""),t}function T(t,e){if(t&&e)return H(t,e)||(t.className+=" "+e),t}function z(t){return void 0!==t}function W(t,e){return!(!t||!z(t))&&(t.getAttribute?n=t.getAttribute(e):t.getAttributeNode&&(n=t.getAttributeNode(e).value),!(!z(n)||""===n)&&n);var n}function a(n){E(n,"click",function(t){var e;M(t),(e=t).preventDefault?e.preventDefault():e.returnValue=!1,b=W(n,m+"-group")||!1,V(x=n,!1,!1,!1)},!1)}function M(t){t.stopPropagation?t.stopPropagation():t.returnValue=!1}function N(t){for(var e=[],n=0;n<u.thumbnails.length;n++)W(u.thumbnails[n],m+"-group")===t&&e.push(u.thumbnails[n]);return e}function S(t,e){for(var n=N(e),o=0;o<n.length;o++)if(W(t,"src")===W(n[o],"src")&&W(t,m+"-index")===W(n[o],m+"-index")&&W(t,m)===W(n[o],m))return o}function B(){if(!d&&(O(u.box,c+"-loading"),!g&&"string"!=typeof u.opt.loadingAnimation&&u.opt.loadingAnimation)){clearInterval(p);for(var t=0;t<I.length;t++)O(I[t],c+"-active")}}function L(){if(u.opt.responsive&&C&&k){var t=i()/2-C.offsetHeight/2;C.style.top=t+"px",k.style.top=t+"px"}}function V(t,e,n,o){if(!t&&!e)return!1;var i;(b=e||b||W(t,m+"-group"))&&(w=N(b),"boolean"!=typeof t||t||(t=w[0])),y.img=new Image,i="string"==typeof(x=t)?t:W(t,m)?W(t,m):W(t,"src"),v=!1,A||("number"==typeof u.opt.animation&&T(y.img,c+"-animate-transition "+c+"-animate-init"),A=!0,u.opt.onopen&&u.opt.onopen(y)),u.opt&&z(u.opt.hideOverflow)&&!u.opt.hideOverflow||(f.style.overflow="hidden"),u.box.style["padding-top"]="0",u.wrapper.innerHTML="",u.wrapper.appendChild(y.img),u.opt.animation&&T(u.wrapper,c+"-animate");var a=W(t,m+"-caption");if(a&&u.opt.captions){var r=document.createElement("p");r.setAttribute("class",c+"-caption"),r.innerHTML=a,u.wrapper.appendChild(r)}T(u.box,c+"-active"),d&&T(u.wrapper,c+"-active"),u.opt.controls&&1<w.length&&(!function(){if(!C){if(T(C=document.createElement("span"),c+"-next"),u.opt.nextImg){var t=document.createElement("img");t.setAttribute("src",u.opt.nextImg),C.appendChild(t)}else T(C,c+"-no-img");E(C,"click",function(t){M(t),u.next()},!1),u.box.appendChild(C)}if(T(C,c+"-active"),!k){if(T(k=document.createElement("span"),c+"-prev"),u.opt.prevImg){var e=document.createElement("img");e.setAttribute("src",u.opt.prevImg),k.appendChild(e)}else T(k,c+"-no-img");E(k,"click",function(t){M(t),u.prev()},!1),u.box.appendChild(k)}T(k,c+"-active")}(),L()),y.img.onerror=function(t){u.opt.onloaderror&&(t._happenedWhile=o||!1,u.opt.onloaderror(t))},y.img.onload=function(){if(y.originalWidth=this.naturalWidth||this.width,y.originalHeight=this.naturalHeight||this.height,d||g){var t=new Image;t.setAttribute("src",i),y.originalWidth=t.width,y.originalHeight=t.height}var e=setInterval(function(){H(u.box,c+"-active")&&(T(u.wrapper,c+"-wrapper-active"),"number"==typeof u.opt.animation&&T(y.img,c+"-animate-transition"),n&&n(),B(),clearTimeout(l),u.opt.preload&&function(){if(b){var t=new Image,e=new Image,n=S(x,b);n===w.length-1?(t.src=W(w[w.length-1],m)||w[w.length-1].src,e.src=W(w[0].src,m)||w[0].src):e.src=0===n?(t.src=W(w[w.length-1],m)||w[w.length-1].src,W(w[1],m)||w[1].src):(t.src=W(w[n-1],m)||w[n-1].src,W(w[n+1],m)||w[n+1].src)}}(),u.opt.nextOnClick&&(T(y.img,c+"-next-on-click"),E(y.img,"click",function(t){M(t),u.next()},!1)),u.opt.onimageclick&&E(y.img,"click",function(t){M(t),u.opt.onimageclick(y)},!1),u.opt.onload&&u.opt.onload(o),clearInterval(e),u.resize())},10)},y.img.setAttribute("src",i),d||(B(),l=setTimeout(function(){if(T(u.box,c+"-loading"),!g&&"number"==typeof u.opt.loadingAnimation){var t=0;p=setInterval(function(){T(I[t],c+"-active"),setTimeout(function(){O(I[t],c+"-active")},u.opt.loadingAnimation),t=t>=I.length?0:t+=1},u.opt.loadingAnimation)}},500))}u.opt={},u.box=!1,u.wrapper=!1,u.thumbnails=[],u.thumbnails.push=function(){for(var t=0,e=arguments.length;t<e;t++)a(arguments[t]);return Array.prototype.push.apply(this,arguments)},u.load=function(t){0<navigator.appVersion.indexOf("MSIE 8")&&(d=!0),0<navigator.appVersion.indexOf("MSIE 9")&&(g=!0),function(t){function e(t){return"boolean"!=typeof t||t}if(t||(t={}),u.opt={boxId:t.boxId||!1,controls:e(t.controls),dimensions:e(t.dimensions),captions:e(t.captions),prevImg:"string"==typeof t.prevImg&&t.prevImg,nextImg:"string"==typeof t.nextImg&&t.nextImg,hideCloseBtn:t.hideCloseBtn||!1,closeOnClick:"boolean"!=typeof t.closeOnClick||t.closeOnClick,nextOnClick:e(t.nextOnClick),loadingAnimation:void 0===t.loadingAnimation||t.loadingAnimation,animElCount:t.animElCount||4,preload:e(t.preload),carousel:e(t.carousel),animation:"number"==typeof t.animation||!1===t.animation?t.animation:400,responsive:e(t.responsive),maxImgSize:t.maxImgSize||.8,keyControls:e(t.keyControls),hideOverflow:t.hideOverflow||!0,onopen:t.onopen||!1,onclose:t.onclose||!1,onload:t.onload||!1,onresize:t.onresize||!1,onloaderror:t.onloaderror||!1,onimageclick:"function"==typeof t.onimageclick&&t.onimageclick},u.opt.boxId){u.box=document.getElementById(u.opt.boxId);var n=u.box.getAttribute("class");n.search(c+" ")<0&&u.box.setAttribute("class",n+" "+c)}else if(!u.box){var o=document.getElementById(s);o||(o=document.createElement("div")),o.setAttribute("id",s),o.setAttribute("class",c),u.box=o,f.appendChild(u.box)}if(u.box.innerHTML=h,d&&T(u.box,c+"-ie8"),u.wrapper=document.getElementById(s+"-contentwrapper"),!u.opt.hideCloseBtn){var i=document.createElement("span");i.setAttribute("id",s+"-close"),i.setAttribute("class",c+"-close"),i.innerHTML="X",u.box.appendChild(i),E(i,"click",function(t){M(t),u.close()},!1)}if(!d&&u.opt.closeOnClick&&E(u.box,"click",function(t){M(t),u.close()},!1),"string"==typeof u.opt.loadingAnimation)(r=document.createElement("img")).setAttribute("src",u.opt.loadingAnimation),T(r,c+"-loading-animation"),u.box.appendChild(r);else if(u.opt.loadingAnimation){u.opt.loadingAnimation="number"==typeof u.opt.loadingAnimation?u.opt.loadingAnimation:200,T(r=document.createElement("div"),c+"-loading-animation");for(var a=0;a<u.opt.animElCount;)I.push(r.appendChild(document.createElement("span"))),a++;u.box.appendChild(r)}u.opt.responsive?(E(window,"resize",function(){u.resize()},!1),T(u.box,c+"-nooverflow")):O(u.box,c+"-nooverflow"),u.opt.keyControls&&E(document,"keydown",function(t){A&&(M(t),39===t.keyCode?u.next():37===t.keyCode?u.prev():27===t.keyCode&&u.close())},!1)}(t);for(var e,n,o,i=document.querySelectorAll("["+m+"]"),a=0;a<i.length;a++)e=i[a],n=m,o=void 0,e&&z(e)&&(e.getAttribute?o=e.getAttribute(n):e.getAttributeNode&&(o=e.getAttributeNode(n).value),"string"==typeof o)&&(i[a].setAttribute(m+"-index",a),u.thumbnails.push(i[a]))},u.open=function(t,e){t&&e&&(e=!1),V(t,e,!1,!1)},u.resize=function(){if(y.img){window.innerWidth||document.documentElement.offsetWidth,i();var t=u.box.offsetWidth,e=u.box.offsetHeight;!v&&y.img&&y.img.offsetWidth&&y.img.offsetHeight&&(v=y.img.offsetWidth/y.img.offsetHeight),o=Math.floor(t/v)>e?(n=e*v,e):(n=t)/v,n=Math.floor(n*u.opt.maxImgSize),o=Math.floor(o*u.opt.maxImgSize),(u.opt.dimensions&&o>y.originalHeight||u.opt.dimensions&&n>y.originalWidth)&&(o=y.originalHeight,n=y.originalWidth),y.img.setAttribute("width",n),y.img.setAttribute("height",o),y.img.style["margin-top"]=(i()-o)/2+"px",setTimeout(L,200),u.opt.onresize&&u.opt.onresize(y)}},u.next=function(){if(b){var t=S(x,b)+1;if(w[t])x=w[t];else{if(!u.opt.carousel)return;x=w[0]}"number"==typeof u.opt.animation?(O(y.img,c+"-animating-next"),setTimeout(function(){V(x,!1,function(){setTimeout(function(){T(y.img,c+"-animating-next")},u.opt.animation/2)},"next")},u.opt.animation/2)):V(x,!1,!1,"next")}},u.prev=function(){if(b){var t=S(x,b)-1;if(w[t])x=w[t];else{if(!u.opt.carousel)return;x=w[w.length-1]}"number"==typeof u.opt.animation?(O(y.img,c+"-animating-prev"),setTimeout(function(){V(x,!1,function(){setTimeout(function(){T(y.img,c+"-animating-next")},u.opt.animation/2)},"prev")},u.opt.animation/2)):V(x,!1,!1,"prev")}},u.close=function(){x=b=!1;var t=y;y={},A=!(w=[]),O(u.box,c+"-active"),O(u.wrapper,c+"-wrapper-active"),O(C,c+"-active"),O(k,c+"-active"),u.box.style["padding-top"]="0",B(),d&&(u.box.style.display="none"),u.opt&&z(u.opt.hideOverflow)&&!u.opt.hideOverflow||(f.style.overflow="auto"),u.opt.onclose&&u.opt.onclose(t)}}