"use strict"
/**
 * jsOnlyLightbox 0.5.0
 * Copyright Â© 2014 Felix Hagspiel - http://jslightbox.felixhagspiel.de
 *
 * @license MIT
 * - Free for use in both personal and commercial projects
 */
function Lightbox(){function t(){return window.innerHeight||document.documentElement.offsetHeight}function e(){return window.innerWidth||document.documentElement.offsetWidth}function n(t,e,n,o){t.addEventListener?t.addEventListener(e,n,o||!1):t.attachEvent&&t.attachEvent("on"+e,n)}function o(t,e){return t&&e?new RegExp("(^|\\s)"+e+"(\\s|$)").test(t.className):void 0}function i(t,e){return t&&e?(t.className=t.className.replace(new RegExp("(?:^|\\s)"+e+"(?!\\S)"),""),t):void 0}function a(t,e){return t&&e?(o(t,e)||(t.className+=" "+e),t):void 0}function r(t){return"undefined"!=typeof t?!0:!1}function s(t,e){if(!t||!r(t))return!1;var n;return t.getAttribute?n=t.getAttribute(e):t.getAttributeNode&&(n=t.getAttributeNode(e).value),r(n)&&""!=n?n:!1}function l(t,e){if(!t||!r(t))return!1;var n;return t.getAttribute?n=t.getAttribute(e):t.getAttributeNode&&(n=t.getAttributeNode(e).value),"string"==typeof n?!0:!1}function p(t){n(t,"click",function(){W=s(t,"data-jslghtbx-group")||!1,M=t,v(t,!1,!1,!1)},!1)}function g(t){t.stopPropagation?t.stopPropagation():t.returnValue=!1}function c(t){for(var e=[],n=0;n<S.length;n++)s(S[n],"data-jslghtbx-group")===t&&e.push(S[n]);return e}function m(t,e){for(var n=c(e),o=0;o<n.length;o++)if(s(t,"src")===s(n[o],"src")&&s(t,"data-jslghtbx")===s(n[o],"data-jslghtbx"))return o}function d(){if(W){var t=new Image,e=new Image,n=m(M,W);n===L.length-1?(t.src=L[L.length-1].src,e.src=L[0].src):0===n?(t.src=L[L.length-1].src,e.src=L[1].src):(t.src=L[n-1].src,e.src=L[n+1].src)}}function u(){if(!k){f();var t=function(){if(a(H.box,"jslghtbx-loading"),!T&&"number"==typeof H.opt.loadingAnimation){var t=0;A=setInterval(function(){a(P[t],"jslghtbx-active"),setTimeout(function(){i(P[t],"jslghtbx-active")},H.opt.loadingAnimation),t=t>=P.length?0:t+=1},H.opt.loadingAnimation)}};w=setTimeout(t,500)}}function f(){if(!k&&(i(H.box,"jslghtbx-loading"),!T&&"string"!=typeof H.opt.loadingAnimation&&H.opt.loadingAnimation)){clearInterval(A);for(var t=0;t<P.length;t++)i(P[t],"jslghtbx-active")}}function h(){if(!R){if(R=document.createElement("span"),a(R,"jslghtbx-next"),H.opt.nextImg){var t=document.createElement("img");t.setAttribute("src",H.opt.nextImg),R.appendChild(t)}else a(R,"jslghtbx-no-img");n(R,"click",function(t){g(t),H.next()},!1),H.box.appendChild(R)}if(a(R,"jslghtbx-active"),!X){if(X=document.createElement("span"),a(X,"jslghtbx-prev"),H.opt.prevImg){var e=document.createElement("img");e.setAttribute("src",H.opt.prevImg),X.appendChild(e)}else a(X,"jslghtbx-no-img");n(X,"click",function(t){g(t),H.prev()},!1),H.box.appendChild(X)}a(X,"jslghtbx-active")}function b(){if(H.opt.responsive&&R&&X){var e=t()/2-R.offsetHeight/2;R.style.top=e+"px",X.style.top=e+"px"}}function x(t){function e(t){return"boolean"==typeof t?t:!0}if(t||(t={}),H.opt={boxId:t.boxId||!1,controls:e(t.controls),dimensions:e(t.dimensions),captions:e(t.captions),prevImg:"string"==typeof t.prevImg?t.prevImg:!1,nextImg:"string"==typeof t.nextImg?t.nextImg:!1,hideCloseBtn:t.hideCloseBtn||!1,closeOnClick:"boolean"==typeof t.closeOnClick?t.closeOnClick:!0,loadingAnimation:void 0===t.loadingAnimation?!0:t.loadingAnimation,animElCount:t.animElCount||4,preload:e(t.preload),carousel:e(t.carousel),animation:t.animation||400,nextOnClick:e(t.nextOnClick),responsive:e(t.responsive),maxImgSize:t.maxImgSize||.8,onopen:t.onopen||!1,onclose:t.onclose||!1,onload:t.onload||!1,onresize:t.onresize||!1,onloaderror:t.onloaderror||!1},H.opt.boxId)H.box=document.getElementById(H.opt.boxId);else if(!H.box&&!document.getElementById("jslghtbx")){var o=document.createElement("div");o.setAttribute("id","jslghtbx"),o.setAttribute("class","jslghtbx"),H.box=o,O.appendChild(H.box)}if(H.box.innerHTML=z,k&&a(H.box,"jslghtbx-ie8"),H.wrapper=document.getElementById("jslghtbx-contentwrapper"),!H.opt.hideCloseBtn){var r=document.createElement("span");r.setAttribute("id","jslghtbx-close"),r.setAttribute("class","jslghtbx-close"),r.innerHTML="X",H.box.appendChild(r),n(r,"click",function(t){g(t),H.close()},!1)}if(!k&&H.opt.closeOnClick&&n(H.box,"click",function(){H.close()},!1),"string"==typeof H.opt.loadingAnimation)j=document.createElement("img"),j.setAttribute("src",H.opt.loadingAnimation),a(j,"jslghtbx-loading-animation"),H.box.appendChild(j);else if(H.opt.loadingAnimation){H.opt.loadingAnimation="number"==typeof H.opt.loadingAnimation?H.opt.loadingAnimation:200,j=document.createElement("div"),a(j,"jslghtbx-loading-animation");for(var s=0;s<H.opt.animElCount;)P.push(j.appendChild(document.createElement("span"))),s++;H.box.appendChild(j)}H.opt.responsive?(n(window,"resize",function(){H.resize()},!1),a(H.box,"jslghtbx-nooverflow")):i(H.box,"jslghtbx-nooverflow")}function v(t,e,i,l){if(!t&&!e)return!1;W=e||W||s(t,"data-jslghtbx-group"),W&&(L=c(W),"boolean"!=typeof t||t||(t=L[0])),B.img=new Image,M=t;var p;p="string"==typeof t?t:s(t,"data-jslghtbx")?s(t,"data-jslghtbx"):s(t,"src"),N=!1,V||("number"==typeof H.opt.animation&&a(B.img,"jslghtbx-animate-transition jslghtbx-animate-init"),V=!0,H.opt.onopen&&H.opt.onopen()),H.opt&&r(H.opt.hideOverflow)&&!H.opt.hideOverflow||O.setAttribute("style","overflow: hidden"),H.box.setAttribute("style","padding-top: 0"),H.wrapper.innerHTML="",H.wrapper.appendChild(B.img),H.opt.animation&&a(H.wrapper,"jslghtbx-animate");var m=s(t,"data-jslghtbx-caption");if(m&&H.opt.captions){var x=document.createElement("p");x.setAttribute("class","jslghtbx-caption"),x.innerHTML=m,H.wrapper.appendChild(x)}a(H.box,"jslghtbx-active"),k&&a(H.wrapper,"jslghtbx-active"),H.opt.controls&&L.length>1&&(h(),b()),B.img.onerror=function(){H.opt.onloaderror&&H.opt.onloaderror(l)},B.img.onload=function(){if(B.originalWidth=this.naturalWidth||this.width,B.originalHeight=this.naturalHeight||this.height,k||T){var t=new Image;t.setAttribute("src",p),B.originalWidth=t.width,B.originalHeight=t.height}var e=setInterval(function(){o(H.box,"jslghtbx-active")&&(a(H.wrapper,"jslghtbx-wrapper-active"),"number"==typeof H.opt.animation&&a(B.img,"jslghtbx-animate-transition"),i&&i(),f(),clearTimeout(w),H.opt.preload&&d(),H.opt.nextOnClick&&(a(B.img,"jslghtbx-next-on-click"),n(B.img,"click",function(t){g(t),H.next()},!1)),H.opt.onload&&H.opt.onload(l),clearInterval(e),H.resize())},10)},B.img.setAttribute("src",p),u()}var j,A,w,y,I,E,C,H=this,k=!1,T=!1,O=document.getElementsByTagName("body")[0],z='<div class="jslghtbx-contentwrapper" id="jslghtbx-contentwrapper" ></div>',N=!1,W=!1,M=!1,B={},L=[],S=[],V=!1,P=[],R=!1,X=!1;H.opt={},H.box=!1,H.wrapper=!1,H.load=function(t){navigator.appVersion.indexOf("MSIE 8")>0&&(k=!0),navigator.appVersion.indexOf("MSIE 9")>0&&(T=!0),x(t);for(var e=document.getElementsByTagName("img"),n=0;n<e.length;n++)l(e[n],"data-jslghtbx")&&(S.push(e[n]),p(e[n]))},H.open=function(t,e){t&&e&&(e=!1),v(t,e,!1,!1)},H.resize=function(){if(B.img){y=e(),I=t();var n=H.box.offsetWidth,o=H.box.offsetHeight;!N&&B.img&&B.img.offsetWidth&&B.img.offsetHeight&&(N=B.img.offsetWidth/B.img.offsetHeight),Math.floor(n/N)>o?(E=o*N,C=o):(E=n,C=n/N),E=Math.floor(E*H.opt.maxImgSize),C=Math.floor(C*H.opt.maxImgSize),(H.opt.dimensions&&C>B.originalHeight||H.opt.dimensions&&E>B.originalWidth)&&(C=B.originalHeight,E=B.originalWidth),B.img.setAttribute("width",E),B.img.setAttribute("height",C),B.img.setAttribute("style","margin-top:"+(t()-C)/2+"px"),setTimeout(b,200),H.opt.onresize&&H.opt.onresize()}},H.next=function(){if(W){var t=m(M,W)+1;if(L[t])M=L[t];else{if(!H.opt.carousel)return;M=L[0]}"number"==typeof H.opt.animation?(i(B.img,"jslghtbx-animating-next"),setTimeout(function(){var t=function(){setTimeout(function(){a(B.img,"jslghtbx-animating-next")},H.opt.animation/2)};v(M,!1,t,"next")},H.opt.animation/2)):v(M,!1,!1,"next")}},H.prev=function(){if(W){var t=m(M,W)-1;if(L[t])M=L[t];else{if(!H.opt.carousel)return;M=L[L.length-1]}"number"==typeof H.opt.animation?(i(B.img,"jslghtbx-animating-prev"),setTimeout(function(){var t=function(){setTimeout(function(){a(B.img,"jslghtbx-animating-next")},H.opt.animation/2)};v(M,!1,t,"prev")},H.opt.animation/2)):v(M,!1,!1,"prev")}},H.close=function(){W=!1,M=!1,B={},L=[],V=!1,i(H.box,"jslghtbx-active"),i(H.wrapper,"jslghtbx-wrapper-active"),i(R,"jslghtbx-active"),i(X,"jslghtbx-active"),H.box.setAttribute("style","padding-top: 0px"),f(),k&&H.box.setAttribute("style","display: none"),H.opt&&r(H.opt.hideOverflow)&&!H.opt.hideOverflow||O.setAttribute("style","overflow: auto"),H.opt.onclose&&H.opt.onclose()}}