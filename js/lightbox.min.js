"use strict";
/**
 * jsOnlyLightbox 0.5.3
 * Copyright Â© 2014 Felix Hagspiel - http://jslightbox.felixhagspiel.de
 *
 * @license MIT
 * - Free for use in both personal and commercial projects
 */
function Lightbox(){function t(){return window.innerHeight||document.documentElement.offsetHeight}function e(){return window.innerWidth||document.documentElement.offsetWidth}function n(t,e,n,o){t.addEventListener?t.addEventListener(e,n,o||!1):t.attachEvent&&t.attachEvent("on"+e,n)}function o(t,e){return t&&e?new RegExp("(^|\\s)"+e+"(\\s|$)").test(t.className):void 0}function i(t,e){return t&&e?(t.className=t.className.replace(new RegExp("(?:^|\\s)"+e+"(?!\\S)"),""),t):void 0}function a(t,e){return t&&e?(o(t,e)||(t.className+=" "+e),t):void 0}function r(t){return"undefined"!=typeof t}function s(t,e){if(!t||!r(t))return!1;var n;return t.getAttribute?n=t.getAttribute(e):t.getAttributeNode&&(n=t.getAttributeNode(e).value),r(n)&&""!==n?n:!1}function l(t,e){if(!t||!r(t))return!1;var n;return t.getAttribute?n=t.getAttribute(e):t.getAttributeNode&&(n=t.getAttributeNode(e).value),"string"==typeof n}function p(t){n(t,"click",function(e){c(e),g(e),N=s(t,"data-jslghtbx-group")||!1,S=t,j(t,!1,!1,!1)},!1)}function c(t){t.stopPropagation?t.stopPropagation():t.returnValue=!1}function g(t){t.preventDefault?t.preventDefault():t.returnValue=!1}function d(t){for(var e=[],n=0;n<H.thumbnails.length;n++)s(H.thumbnails[n],"data-jslghtbx-group")===t&&e.push(H.thumbnails[n]);return e}function u(t,e){for(var n=d(e),o=0;o<n.length;o++)if(s(t,"src")===s(n[o],"src")&&s(t,"data-jslghtbx")===s(n[o],"data-jslghtbx"))return o}function m(){if(N){var t=new Image,e=new Image,n=u(S,N);n===L.length-1?(t.src=L[L.length-1].src||s(L[L.length-1],"data-src"),e.src=L[0].src||s(L[0].src,"data-src")):0===n?(t.src=L[L.length-1].src||s(L[L.length-1],"data-src"),e.src=L[1].src||s(L[1],"data-src")):(t.src=L[n-1].src||s(L[n-1],"data-src"),e.src=L[n+1].src||s(L[n+1],"data-src"))}}function f(){if(!O){h();var t=function(){if(a(H.box,"jslghtbx-loading"),!T&&"number"==typeof H.opt.loadingAnimation){var t=0;w=setInterval(function(){a(D[t],"jslghtbx-active"),setTimeout(function(){i(D[t],"jslghtbx-active")},H.opt.loadingAnimation),t=t>=D.length?0:t+=1},H.opt.loadingAnimation)}};y=setTimeout(t,500)}}function h(){if(!O&&(i(H.box,"jslghtbx-loading"),!T&&"string"!=typeof H.opt.loadingAnimation&&H.opt.loadingAnimation)){clearInterval(w);for(var t=0;t<D.length;t++)i(D[t],"jslghtbx-active")}}function b(){if(!P){if(P=document.createElement("span"),a(P,"jslghtbx-next"),H.opt.nextImg){var t=document.createElement("img");t.setAttribute("src",H.opt.nextImg),P.appendChild(t)}else a(P,"jslghtbx-no-img");n(P,"click",function(t){c(t),H.next()},!1),H.box.appendChild(P)}if(a(P,"jslghtbx-active"),!R){if(R=document.createElement("span"),a(R,"jslghtbx-prev"),H.opt.prevImg){var e=document.createElement("img");e.setAttribute("src",H.opt.prevImg),R.appendChild(e)}else a(R,"jslghtbx-no-img");n(R,"click",function(t){c(t),H.prev()},!1),H.box.appendChild(R)}a(R,"jslghtbx-active")}function x(){if(H.opt.responsive&&P&&R){var e=t()/2-P.offsetHeight/2;P.style.top=e+"px",R.style.top=e+"px"}}function v(t){function e(t){return"boolean"==typeof t?t:!0}if(t||(t={}),H.opt={boxId:t.boxId||!1,controls:e(t.controls),dimensions:e(t.dimensions),captions:e(t.captions),prevImg:"string"==typeof t.prevImg?t.prevImg:!1,nextImg:"string"==typeof t.nextImg?t.nextImg:!1,hideCloseBtn:t.hideCloseBtn||!1,closeOnClick:"boolean"==typeof t.closeOnClick?t.closeOnClick:!0,loadingAnimation:void 0===t.loadingAnimation?!0:t.loadingAnimation,animElCount:t.animElCount||4,preload:e(t.preload),carousel:e(t.carousel),animation:"number"==typeof t.animation||t.animation===!1?t.animation:400,nextOnClick:e(t.nextOnClick),responsive:e(t.responsive),maxImgSize:t.maxImgSize||.8,keyControls:e(t.keyControls),hideOverflow:t.hideOverflow||!0,onopen:t.onopen||!1,onclose:t.onclose||!1,onload:t.onload||!1,onresize:t.onresize||!1,onloaderror:t.onloaderror||!1},H.opt.boxId)H.box=document.getElementById(H.opt.boxId);else if(!H.box&&!document.getElementById("jslghtbx")){var o=document.createElement("div");o.setAttribute("id","jslghtbx"),o.setAttribute("class","jslghtbx"),H.box=o,z.appendChild(H.box)}if(H.box.innerHTML=W,O&&a(H.box,"jslghtbx-ie8"),H.wrapper=document.getElementById("jslghtbx-contentwrapper"),!H.opt.hideCloseBtn){var r=document.createElement("span");r.setAttribute("id","jslghtbx-close"),r.setAttribute("class","jslghtbx-close"),r.innerHTML="X",H.box.appendChild(r),n(r,"click",function(t){c(t),H.close()},!1)}if(!O&&H.opt.closeOnClick&&n(H.box,"click",function(t){c(t),H.close()},!1),"string"==typeof H.opt.loadingAnimation)A=document.createElement("img"),A.setAttribute("src",H.opt.loadingAnimation),a(A,"jslghtbx-loading-animation"),H.box.appendChild(A);else if(H.opt.loadingAnimation){H.opt.loadingAnimation="number"==typeof H.opt.loadingAnimation?H.opt.loadingAnimation:200,A=document.createElement("div"),a(A,"jslghtbx-loading-animation");for(var s=0;s<H.opt.animElCount;)D.push(A.appendChild(document.createElement("span"))),s++;H.box.appendChild(A)}H.opt.responsive?(n(window,"resize",function(){H.resize()},!1),a(H.box,"jslghtbx-nooverflow")):i(H.box,"jslghtbx-nooverflow"),H.opt.keyControls&&n(document,"keydown",function(t){V&&(c(t),39===t.keyCode?H.next():37===t.keyCode?H.prev():27===t.keyCode&&H.close())},!1)}function j(t,e,i,l){if(!t&&!e)return!1;N=e||N||s(t,"data-jslghtbx-group"),N&&(L=d(N),"boolean"!=typeof t||t||(t=L[0])),B.img=new Image,S=t;var p;p="string"==typeof t?t:s(t,"data-jslghtbx")?s(t,"data-jslghtbx"):s(t,"src"),M=!1,V||("number"==typeof H.opt.animation&&a(B.img,"jslghtbx-animate-transition jslghtbx-animate-init"),V=!0,H.opt.onopen&&H.opt.onopen()),H.opt&&r(H.opt.hideOverflow)&&!H.opt.hideOverflow||z.setAttribute("style","overflow: hidden"),H.box.setAttribute("style","padding-top: 0"),H.wrapper.innerHTML="",H.wrapper.appendChild(B.img),H.opt.animation&&a(H.wrapper,"jslghtbx-animate");var g=s(t,"data-jslghtbx-caption");if(g&&H.opt.captions){var u=document.createElement("p");u.setAttribute("class","jslghtbx-caption"),u.innerHTML=g,H.wrapper.appendChild(u)}a(H.box,"jslghtbx-active"),O&&a(H.wrapper,"jslghtbx-active"),H.opt.controls&&L.length>1&&(b(),x()),B.img.onerror=function(){H.opt.onloaderror&&H.opt.onloaderror(l)},B.img.onload=function(){if(B.originalWidth=this.naturalWidth||this.width,B.originalHeight=this.naturalHeight||this.height,O||T){var t=new Image;t.setAttribute("src",p),B.originalWidth=t.width,B.originalHeight=t.height}var e=setInterval(function(){o(H.box,"jslghtbx-active")&&(a(H.wrapper,"jslghtbx-wrapper-active"),"number"==typeof H.opt.animation&&a(B.img,"jslghtbx-animate-transition"),i&&i(),h(),clearTimeout(y),H.opt.preload&&m(),H.opt.nextOnClick&&(a(B.img,"jslghtbx-next-on-click"),n(B.img,"click",function(t){c(t),H.next()},!1)),H.opt.onload&&H.opt.onload(l),clearInterval(e),H.resize())},10)},B.img.setAttribute("src",p),f()}var A,w,y,I,C,E,k,H=this,O=!1,T=!1,z=document.getElementsByTagName("body")[0],W='<div class="jslghtbx-contentwrapper" id="jslghtbx-contentwrapper" ></div>',M=!1,N=!1,S=!1,B={},L=[],V=!1,D=[],P=!1,R=!1;H.opt={},H.box=!1,H.wrapper=!1,H.thumbnails=[],H.load=function(t){navigator.appVersion.indexOf("MSIE 8")>0&&(O=!0),navigator.appVersion.indexOf("MSIE 9")>0&&(T=!0),v(t);for(var e=document.querySelectorAll("[data-jslghtbx]"),n=0;n<e.length;n++)l(e[n],"data-jslghtbx")&&(H.thumbnails.push(e[n]),p(e[n]))},H.open=function(t,e){t&&e&&(e=!1),j(t,e,!1,!1)},H.resize=function(){if(B.img){I=e(),C=t();var n=H.box.offsetWidth,o=H.box.offsetHeight;!M&&B.img&&B.img.offsetWidth&&B.img.offsetHeight&&(M=B.img.offsetWidth/B.img.offsetHeight),Math.floor(n/M)>o?(E=o*M,k=o):(E=n,k=n/M),E=Math.floor(E*H.opt.maxImgSize),k=Math.floor(k*H.opt.maxImgSize),(H.opt.dimensions&&k>B.originalHeight||H.opt.dimensions&&E>B.originalWidth)&&(k=B.originalHeight,E=B.originalWidth),B.img.setAttribute("width",E),B.img.setAttribute("height",k),B.img.setAttribute("style","margin-top:"+(t()-k)/2+"px"),setTimeout(x,200),H.opt.onresize&&H.opt.onresize()}},H.next=function(){if(N){var t=u(S,N)+1;if(L[t])S=L[t];else{if(!H.opt.carousel)return;S=L[0]}"number"==typeof H.opt.animation?(i(B.img,"jslghtbx-animating-next"),setTimeout(function(){var t=function(){setTimeout(function(){a(B.img,"jslghtbx-animating-next")},H.opt.animation/2)};j(S,!1,t,"next")},H.opt.animation/2)):j(S,!1,!1,"next")}},H.prev=function(){if(N){var t=u(S,N)-1;if(L[t])S=L[t];else{if(!H.opt.carousel)return;S=L[L.length-1]}"number"==typeof H.opt.animation?(i(B.img,"jslghtbx-animating-prev"),setTimeout(function(){var t=function(){setTimeout(function(){a(B.img,"jslghtbx-animating-next")},H.opt.animation/2)};j(S,!1,t,"prev")},H.opt.animation/2)):j(S,!1,!1,"prev")}},H.close=function(){N=!1,S=!1,B={},L=[],V=!1,i(H.box,"jslghtbx-active"),i(H.wrapper,"jslghtbx-wrapper-active"),i(P,"jslghtbx-active"),i(R,"jslghtbx-active"),H.box.setAttribute("style","padding-top: 0px"),h(),O&&H.box.setAttribute("style","display: none"),H.opt&&r(H.opt.hideOverflow)&&!H.opt.hideOverflow||z.setAttribute("style","overflow: auto"),H.opt.onclose&&H.opt.onclose()}}